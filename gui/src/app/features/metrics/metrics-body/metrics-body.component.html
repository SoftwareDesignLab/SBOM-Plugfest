<div class="metrics-body flex col center">
  <div class="flex buttons">
    <div class="flex" *ngIf="processors.length > 1">
      <app-button (click)="showPassed = !showPassed"
        >Show {{ showPassed ? "Failed Only" : "Passed" }}</app-button
      >
    </div>
    <div
      class="label hover"
      [ngStyle]="{ 'background-color': getProcessorColor(processor) }"
      *ngFor="let processor of processors"
      (click)="processorFilter = processorFilter === processor ? '' : processor"
    >
      {{ processor }}
    </div>
  </div>
  <div class="results" *ngIf="result">
    <div *ngIf="qr">
      <div *ngFor="let identifier of identifiers">
        <div *ngFor="let message of getIdentifierMessages(identifier)">
          <div
            *ngIf="
              qr.mergedResults[identifier][message][0] && processorFilter.length
                ? qr.mergedResults[identifier][message][0].processor ===
                  processorFilter
                : true
            "
          >
            <app-accordion
              *ngIf="
                (!showPassed &&
                  qr.mergedResults[identifier][message][0].pass !== 1) ||
                showPassed
              "
              [extra]="[
                getGrade(
                  qr.mergedResults[identifier][message][0].pass
                ).toString()
              ]"
              [color]="getColor(qr.mergedResults[identifier][message][0])"
            >
              <div title>{{ identifier }}: {{ message }}</div>
              <div body *ngFor="let result of getResults(identifier, message)">
                {{ result.fieldName }}
                <!-- <app-accordion

              >
                <span title>{{ res.identifier }}:{{ res.message }}</span>
                <div body>
                  <span>{{ getTestMessage(res) }}</span>
                </div>
              </app-accordion> -->
              </div>
            </app-accordion>
          </div>
        </div>
      </div>

      <div class="text flex center" *ngIf="!result">
        Please select an SBOM to see test results
      </div>
      <div
        class="text flex center"
        *ngIf="result && getKeys(result).length === 0"
      >
        There aren't any test results with the selected SBOM
      </div>
    </div>
  </div>
</div>
